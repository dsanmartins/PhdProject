<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>

	 <entry key = "query-3">
    	
	    declare namespace xmi="http://www.omg.org/XMI";
		declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance";
		declare namespace action="http://www.eclipse.org/MoDisco/kdm/action";
		declare namespace code="http://www.eclipse.org/MoDisco/kdm/code";
		declare namespace kdm="http://www.eclipse.org/MoDisco/kdm/kdm";
		declare namespace source="http://www.eclipse.org/MoDisco/kdm/source";
			    
    </entry>

   <entry key = "createModel">
    	
	   declare namespace xmi="http://www.omg.org/XMI";
	   declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance";
	   declare namespace action="http://www.eclipse.org/MoDisco/kdm/action";
	   declare namespace code="http://www.eclipse.org/MoDisco/kdm/code";
	   declare namespace kdm="http://www.eclipse.org/MoDisco/kdm/kdm";
	   declare namespace source="http://www.eclipse.org/MoDisco/kdm/source";
		
	   	<![CDATA[ 
	   		insert node <model> </model> as last into //kdm:Segment 
	   	]]> 
	
    </entry>
    
 	 <entry key = "createModelAttr">
    	
	   declare namespace xmi="http://www.omg.org/XMI";
	   declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance";
	   declare namespace action="http://www.eclipse.org/MoDisco/kdm/action";
	   declare namespace code="http://www.eclipse.org/MoDisco/kdm/code";
	   declare namespace kdm="http://www.eclipse.org/MoDisco/kdm/kdm";
	   declare namespace source="http://www.eclipse.org/MoDisco/kdm/source";
	   declare namespace structure="http://www.eclipse.org/MoDisco/kdm/structure";
	   declare variable $xsiType as xs:string external;
	   declare variable $modelName as xs:string external;
		
	   for $a in  //kdm:Segment/model[last()]
	   return insert node (attribute { $xsiType } {$modelName }) as last into $a
	
    </entry>
   
	<entry key = "createStructureElement">
    	
	   declare namespace xmi="http://www.omg.org/XMI";
	   declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance";
	   declare namespace action="http://www.eclipse.org/MoDisco/kdm/action";
	   declare namespace code="http://www.eclipse.org/MoDisco/kdm/code";
	   declare namespace kdm="http://www.eclipse.org/MoDisco/kdm/kdm";
	   declare namespace source="http://www.eclipse.org/MoDisco/kdm/source";
	   declare variable $component_name as xs:string external; 	
	   declare variable $parent as xs:string external; 	
	   declare variable $typeAbstraction as xs:string external; 	
	   declare variable $stereotype as xs:string external; 	
		
	   	<![CDATA[ 
			for $a in //kdm:Segment/model[@xsi:type="structure:StructureModel"]
			let $b := $a//structureElement[@name=$parent]
			return if (empty($b)) then
				insert node <structureElement name="{$component_name}" xsi:type="{$typeAbstraction}" implementation="" outAggregated="" inAggregated="" stereotype="{$stereotype}"> </structureElement> as last into $a
			else
				insert node <structureElement name="{$component_name}" xsi:type="{$typeAbstraction}" implementation="" outAggregated="" inAggregated="" stereotype="{$stereotype}"> </structureElement> as last into $b
		]]> 
	
    </entry>

	<entry key = "checkComponentExist">
	  declare namespace xmi="http://www.omg.org/XMI";
	  declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance";
	  declare namespace action="http://www.eclipse.org/MoDisco/kdm/action";declare namespace code="http://www.eclipse.org/MoDisco/kdm/code";
	  declare namespace kdm="http://www.eclipse.org/MoDisco/kdm/kdm";
	  declare namespace source="http://www.eclipse.org/MoDisco/kdm/source";
      declare namespace structure="http://www.eclipse.org/MoDisco/kdm/structure";
	  declare variable $componentName as xs:string external;
		
	  let $a:= //kdm:Segment/model[@xsi:type="structure:StructureModel" and @name != "externals"]//structureElement[@name = $componentName]
	  return if (empty($a)) then false() else true() 
  	 </entry>
    
    
</properties>


